<template name="WidgetShow">
  <li id="{{ componentId 'widget' }}" class="{{ widgetClasses }}"
      data-mid="{{ _id }}" {{ gridAttrs }}>

    {{# if selecting }}
    <div class="selecting-cover">
      {{# if selectable }}
      <div class="checkbox checkbox-warning checkbox-big select-check">
        <input type="checkbox" id="{{ componentId 'select' }}"
               name="{{ componentId 'select' }}" value="{{ _id }}" />
        <label for="{{ componentId 'select' }}"></label>
      </div>
      {{/if}}
    </div>
    {{/if}}

    <div class="title-bar">
      {{# if package.metadata.widget.category }}
      <span class="widget-category-label" title="{{ category.name }}"
                                          style="{{ categoryStyle }}">
      </span>
      {{/if}}

      {{# if dataSource }}
      <p class="data-source">
        From <a href="{{ dataSource.url }}" target="_blank">
          {{ dataSource.name }}
        </a>
      </p>
      {{/if}}

      <div class="buttons">
        {{# if dashboard.editable }}
        <a href="#" class="remove-widget" title="Remove widget">
          <span class="glyphicon glyphicon-remove"></span>
        </a>
        {{/if}}

        {{# if infoShouldShow }}
        <a class="button-info" href="#" id="{{ componentId 'Info' }}"
          title="About" data-toggle="popover" data-trigger="click"
          data-html="true" data-placement="auto right" data-viewport="#wrapper"
          data-container="body">
          <span class="glyphicon glyphicon-info-sign"></span>
        </a>
        {{> WidgetInfo }}
        {{/if }}

        {{# if dashboard.editable }}
          {{# if providesSettings }}
            <a class="button-settings" href="#" id="{{ componentId 'Settings' }}"
              title="Settings" data-toggle="popover" data-trigger="click"
              data-html="true" data-placement="auto right" data-viewport="#wrapper"
              data-container="body">
              <span class="glyphicon glyphicon-cog"></span>
              {{# if package.metadata.widget.settings }}
              <span class="widget-settings-helper">{{package.metadata.widget.settings}}</span>
              {{/if}}
            </a>

            {{> WidgetSettings }}
          {{/if}}
        {{/if}}
      </div>
    </div>

    <div class="widget-body" style="{{ resizeTransform }}">
      {{> Template.dynamic template=widgetTemplate data=data }}
    </div>
  </li>
</template>
